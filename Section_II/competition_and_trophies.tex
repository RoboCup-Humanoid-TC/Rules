\clearpage
\sffamily
{\bfseries\color[rgb]{0.4,0.4,0.4}The Competitions and Trophies}
\phantomsection
\addcontentsline{toc}{subsection}{The Competitions and Trophies}


\bigskip

{\bfseries Setup and Inspections (physical competition)}

\headlinebox

The competitions in the Humanoid League are preceded by a setup and inspection
period of at least 24 h.
During this time, every robot will be inspected by the league organizing
committee for compliance with the design rules detailed in Law 4.
Robots need to demonstrate the ability to walk (all sub-leagues) and stand up
from front and back (KidSize).
The teams must be able to demonstrate at least one successful stand-up action
from each side during the robot inspection.
All robots will be photographed during the inspection.
A re-inspection becomes necessary after any change that could affect the
compliance to the design rules.
A re-inspection might be requested by any team leader up to 1 hour prior to a game.

\bigskip

{\bfseries Setup and Inspections (virtual competition)}

\headlinebox

Teams who do not want their robot model to be shared publicly should
provide a non-disclosure agreement to the Technical Committee. This agreement
will have to be signed by every team requesting access to the robot model, for
reviewing or inspection.

The virtual competitions in the Humanoid League are preceded by a setup and inspection
period. Teams need to submit a first draft of a file containing their robot model \removed{two months} \added{three weeks} before the tournament.
During the following \removed{two weeks} \added{week}, every robot will be inspected by the league organizing
committee for compliance with the design rules detailed in Law 4. Teams will then receive feedback and are granted a period of \removed{two weeks} \added{one week} to change the robot model to be compliant with the laws of the game. A final file containing the robot model needs to be submitted at latest \removed{four weeks} \added{one week} before the competition.
A re-inspection becomes necessary after any change that could affect the
compliance to the design rules. Changes to the robot model made less than \removed{four weeks} \added{one week} before the tournament need to be submitted by e-mail to the Organizing Committee. The e-mail needs to contain the new file containing the robot model as well as a summary of the changes made and a justification for performing the changes.
A re-inspection might be requested by any team leader and is guaranteed to be evaluated if submitted up to 12 hours prior to a game.

\bigskip

{\bfseries Referee Duty (physical competition only)}

\headlinebox

Each team must name at least one person who is familiar with the rules and who
might be assigned for referee duties and for the technical inspection by the
league organizing committee.

\bigskip

{\bfseries Competitions}

\headlinebox

The competitions consist of:

\begin{enumerate}
\item Regular tournament for KidSize (4 vs. 4),
\item Regular tournament for AdultSize (2 vs. 2),
\item Drop-In games for KidSize and AdultSize (physical competition only)
\item Technical challenges (physical competition only).
\end{enumerate}

\bigskip

% Combined Teams
  While teams do require only 1 robot to participate to the Drop-In,
  they need to present a full roster of robots for the soccer games%
  \footnote{4 in KidSize, 2 in AdultSize}.
  During robot inspection, teams have to announce how many robots they can provide.

  After Drop-In:
  \begin{itemize}
  \item Teams which cannot provide a full roster have to form a
    full team with one or more other teams from the same league to present
    a full roster.
  \item Teams which can provide a full roster are allowed to play as a
    full team on their own,
    but can also join other teams to form a combined team.
  \end{itemize}
  
  In case one or more teams are left and the total number of their robots is
  not sufficient to form a full roster,
  they are still allowed to play as a full team.
  
  This ensures that:
  \begin{itemize}
  \item any team who registers to a physical competition can compete in the regular tournament,
    independently of the number of robots they bring.
  \item any team who brings a full roster is not required to merge with another
    team for the regular tournament of a physical competition.
  \end{itemize}

\bigskip

% Drop-In for Seeding + Divisions
Physical competitions start with the Drop-In tournament.
  The scores of the teams during the Drop-In tournament are used to
  establish a preliminary ranking used for seeding teams in the different round robins groups.
  If multiple teams join to form a full team,
  only the best score of the teams composing the full team is used~\footnote{%
    %
      If the three teams A,B and C participate in the drop-in tournament,
      receive respectively $3.2$, $4.5$ and $-1.6$ points and
      form a full team,
      the score of their full team will be $4.5$.
  }.

  \bigskip

  If at least 16 full teams participate in a league,
  the teams are separated in two different divisions for the regular tournament:
  \begin{itemize}
  \item The best $N$ full teams are qualified for the first round robin of division A
    \footnote{$N$ is either 8 or 12 depending on the number of full teams and
      has to be announced before the beginning of the tournament.}.
  \item The other full teams are qualified for the first round robin of division B.
  \end{itemize}
  
  In the virtual competition, the qualification for division A and division B as well as the seeding for the round robin groups is determined prior to the first game of the main tournament. It may be based on an initial round of games, penalty shoot-outs, results from the previous RoboCup competition, or another similarly appropriate method determined by the Organizing Committee. The method of seeding needs to be announced at least one month prior to the start of the tournament.

  Both divisions play separate round robins. 
  The lowest ranked teams per group in division A will have a playoff
  with the highest ranked teams per group in division B.
  The winners of the playoff games are qualified for the second round robin of
  division A, the losers will play the second round robin in
  division B.
  
  Thereafter, division A and division B proceed independently of each other and 
  each will normally consist of a round robin stage, followed by a number of knockout matches. 

  
  \bigskip

  In case there is less than 16 full teams, there is only one division with a
  first round robin and a number of knock-out games.

\bigskip

All teams of a group play once against each other.
The round robin games may end in a draw.
In this case, both teams receive one point.
Otherwise, the winning team receives three points and the not winning team
receives zero points.

\bigskip

For the AdultSize soccer games of a physical competiton, a specific rule for robot handlers applies. For every robot, one robot handler is allowed to stay near the robot such that the robot handler does not interfere with the game. Specifically, the robot handler:
\begin{itemize}
\item should position himself behind the robot at a distance of at least an arm length away from the robot's convex hull.
\item must not block the vision of any of the robots on the ball or goals.
\item must not block the path of any robot.
\item must not touch any robot. Touching a robot is considered an offence that is penalised by a removal penalty of the robot handler's own robot according to the laws of the game.
\item must not enter the radius of one arm length around the robot unless the robot is to be picked up or to avoid interference with the game. Violation of this rule results in a warning to the respective robot handler. After two warnings, the robot handler needs to be replaced similarly to the rule specified under ``Request for Pick-up''.
\item has to be dressed in black clothes.
\item may not communicate with the robot in any way, including verbally, while the robot is in play.
\end{itemize}
\color{black}

\bigskip

After games of a round robin have been played, the teams of a group are ranked based on (in decreasing priority): 

\begin{enumerate}
\item the number of earned points,
\item the goal-difference,
\item the absolute number of goals,
\item the result of a direct match,
\item the time needed to score a penalty kick into an empty goal (up to five alternating attempts to score, until at least one team scored),
\item the drawing of a lot.
\end{enumerate}

\bigskip


At least two teams of every group will enter the next round robin or the playoffs.

\bigskip

In the knock-out games of a tournament two further equal periods of 5 minutes each are played if the game is not decided after the regular playing time.  After consulting the team captains, the referee can decide to skip the extra time and continue the game immediately with the five alternating penalty kick trials in the physical competition. If both teams agree, the regular penalty kick trials may be skipped and the extended penalty kick procedure applies instead.

\bigskip


The game plan needs to be announced prior to the start of the tournament.


\bigskip

{\bfseries Forfeits}

\headlinebox

A team that forfeits is disqualified from the competition. Forfeiting is defined as refusing to make a good faith effort to participate in a scheduled game\footnote{If robots are broken in the physical competition, then they should be placed on the field anyway. In the virtual competition, if the software is currently not running properly, a version should be submitted anyway as an indication that the team is willing to participate.}.
\begin{itemize}
\item If a team chooses to forfeit a match in the round robin games the other team plays on an empty goal.
\item If a team chooses to forfeit in a knock-out game before the quarter final, the other team continues in the competition.
\item If a team chooses to forfeit in the quarter finals, it will be replaced by the runner up team in the round robin group that included the forfeiting team.
\item If a team chooses to forfeit in the semi finals or the game for 3rd and 4th place, it will be replaced by the team that lost to the forfeiting team in the quarter finals.
\item A team forfeiting the final match should announce its decision at least 30 minutes before the start of the 3rd vs 4th final.  The league organization committee may impose a one year disqualification of the team and its members in case of avoidable delayed announcements.
\item If a team chooses to forfeit the final after the game for 3rd and 4th place began, it will be replaced by the 3rd place winner, and the 4th place winner will be 3rd place. No new 4th place will be selected.
\item If a team chooses to forfeit the final before the game for 3rd and 4th place, it will be replaced by the team that lost to the forfeiting team in the previous semi-finals. The team that lost to the forfeiting team in the previous semi-finals (i.e. the one initially being qualified for the game for 3rd and 4th place) will be replaced for the game for 3rd and 4th place by the team that lost to it in the respective quarter final.
\end{itemize}

\bigskip

{\bfseries Gameplay}

\headlinebox

In the virtual competition, a time period of 15 seconds is granted to teams between the start of the half time or penalty shoot-out and the beginning of the kick-off procedure.

\bigskip
 
{\bfseries Kick-off procedure}

\begin{itemize}
\item The referee gives the signal ``READY'' that all robots have to reach their
      own half of the field.
      During this phase, handlers are not allowed to interfere with the
      robots.
\item After a period between 15 and 45 seconds the referee gives the signal ``SET''. In the virtual competition, the time of this phase is always 45 seconds.
      The referee calls robots illegally positioned to be removed.
      Handlers are not allowed to remove or touch the legally positioned robots.
      The robot playing the goal keeper has to be announced before the beginning
      of the game.
      Illegally positioned players do not suffer a removal penalty and are
      allowed to enter the field as soon as the game starts.
\item The opponents of the team taking the kick-off are outside the centre circle until the ball is in play.
\item The ball is placed stationary on the centre mark after the ``SET'' signal was given.
\item The referee gives the signal ``PLAY'' or whistles (physical competition only). In the virtual competition, the time between the ``SET'' and ``PLAY'' signal is 5 seconds.
\item The ball is in play when it is kicked and clearly moves as determined by
      the referee\footnote{In the virtual competition, a move of at least 5 cm is considered clearly moving.} or 10 seconds elapsed after the signal.
\end{itemize}

Robots can take any position on the field that is consistent with the above requirements.


\bigskip
 
For initial kick-off (to initially start or restart after a half-time interval),
robots can be placed anywhere on the touch lines or goal lines on the respective
team's own side outside of the goal,
to autonomously enter the field from there.
In the physical competition, robots must be facing the opposite touch line or goal line when being positioned.
In case an illegal start position is chosen for a robot, it is considered illegally positioned and removed from the field. It is allowed to enter the field as soon as the game starts.
For other kick-off situations and for dropped ball robots need to
position themselves from the the position they were when the game was stopped.


\bigskip

Robots with autonomous positioning ability are given between 15 and 45 seconds in the physical competition and 45 seconds in the virtual competition
for re-positioning after a goal has been scored by one of the teams before the
``SET'' signal for kick-off is given by the referee. 
All human team members must leave the field of play immediately after the
``SET'' signal and before the ``PLAY'' signal.

\bigskip


{\bfseries Game interruption procedure}

This procedure applies for throw-ins, corners, goal kicks, direct free-kicks,
indirect free-kicks and penalties called during a game.
It ensures a minimal distance of $D$ between objects that were moved during
this phase.
For KidSize, $D$ is 50 centimeters and for AdultSize, $D$ is 1 meter.

\begin{enumerate}
\item The referee blows the whistle (physical competition only), announces the offence and the
      game interruption
      (e.g 'Pushing Red - Direct Free-Kick Blue')
\item
  The referee communicates the game interruption and to which team it is
    awarded to the game controller or the assistant referee operating the game controller.
\item   The robots are allowed 5 seconds to stand-up and stop any infringement
        to the rules.
        At the end of these 5 seconds, the referee places the ball according to
        the game interruption.
        In case a robot is located at a distance lower than $D$, the following
        actions are performed in order:
        \begin{enumerate}
        \item Move all penalized robots at a distance lower than $D$ of the ball
          away, placing them according to the removal penalty rule so that they
          can finish serving their penalty somewhere else.
        \item Apply a removal penalty on all fallen robots at a distance lower
          than $D$ from the ball.
        \item If previous steps were not sufficient to ensure distance $D$, the
          referee tries to find a nearby location for the ball that is at a
          distance of at least $D$ from all objects.
          This location should respects the rule for the game interruption.
          In particular, there are no alternative location for penalties, goal
          kicks and corner kicks.
        \item If previous steps were not sufficient, the remaining robots
          at a distance of less than $D$ from the ball location are moved away
          from the ball, ensuring that they are at least at a distance of $D$
          from all objects, including the ball.
        \end{enumerate}
\item
        The referee communicates that the Game Interruption is ready to the
        GameController or the assistant referee operating the GameController.
      The player taking the game interruption has up
      to 15 seconds to position themselves for the
      game interruption.
      In the virtual competition, any player of the team taking the
      game interruption may announce that the player
      is ready to take the game interruption at any
      point. In the physical competition, the robot handler informs the referee if the robot is ready to take the free kick.
      Opponent robots must move to a position at least 0.75 m for KidSize and
      1.5m for AdultSize away from the ball.
      They are guaranteed 15 seconds to move away from the ball.
\item In a physical competition, the assistant referee announces that 15 seconds are over.
\item The referee announces that the game interruption is prepared after
      15 seconds have passed.
      The referee may also announce that the game interruption is
        prepared
      before 15 seconds have passed
      if the team taking the game interruption has
      announced their robot is ready and if no opponent is illegally positioned.
\item Any opponent robot still illegally positioned is considered as an
      incapable player and must be removed from the field for 30 seconds
      removal penalty.
\item When the referee decides to execute the game interruption
      and all opponent robots are
      legally positioned or have been removed from the field,
      the referee announces that the game interruption can be executed to
        the GameController or the assistant referee operating the GameController.
      In case of a physical competition, the referee blows the whistle to announce the execution of the free kick.
      The team that was awarded the game interruption
      can kick now.
\item The ball is in play after it has been
      kicked and clearly moves as determined by the referee\footnote{In the virtual competition, a move of at least 5 cm is considered clearly moving.} or after 10 seconds.
\end{enumerate}

The distance between the ball and the player of the opponent team is measured
between the projection on the ground of the center of mass of both
  objects.

\color{black}

\bigskip

{\bfseries Penalty shoot-outs procedure}

The referee decides randomly towards which goal the penalty shoot-outs will be
performed.
Then, each penalty trial is performed with the following procedure.
 
\begin{enumerate}
\item In the virtual competition, the striker is defined as the robot from the striker's team with the
  lowest ID without a red card. In the physical competition, the robot handler can decide which robot to place as a striker from the set of robots that were active on the field, penalized on the side line or in service in the end of the game time.
\item In the virtual competition, the goalkeeper is chosen based on the GameController information. In the physical competition, the same procedure as for selecting a striker applies.
\item In the virtual competition, both players are spawned at appropriate locations. In the physical competition, the respective robot handlers place the robots.
\item The state is set to SET
\item The ball is placed or spawned on the penalty mark.
\item The referee waits 15 seconds before sending signals to start the trial
\item The state is set to PLAYING.
\end{enumerate}

\added{The following additional rules apply to penalty shoot-outs:}

\begin{itemize}
\item \added{The ball holding rule does not apply during penalty shoot-outs.}
\item \added{If the striker commits an offense, the trial ends immediately.}
\item \added{If the goalkeeper commits an offense, it is removed for the whole duration
  of the trial.}
\end{itemize}

\bigskip

{\bfseries Request for Pick-up (physical competition only)}

A robot handler may request to pick-up a robot if and only if a robot is in a
dangerous situation that is likely to lead to physical injuries.
If a robot handler touches a robot without the allowance of the referee,
the respective robot receives a yellow card and the robot handler an official warning.
In AdultSize, a request for pick-up is implicitly granted if the robot is
visible unstable or about to fall.
After two warnings for robot touching, the robot handler may not serve as a
robot handler again for the rest of the game and needs to be replaced by a
different person from the team immediately.
In case of repeated violations throughout the tournament, the Technical
Committee can decide to permanently disallow a certain person from serving as
a robot handler for the rest of the tournament.

\bigskip


{\bfseries Incapable Players}

Players not capable of play (e.g. players not walking on two legs,
players not able to stand, or players with obvious malfunctions)
are not permitted to participate in the game.
They must be removed from the field.
It is up to the referee to judge whether a player is capable of play.
In the physical competition, the referee may ask the team leader of a player suspected to be incapable of
play to demonstrate playing ability at any time.
A field player that is not able to get back into a standing or walking
posture from a fall within 20 seconds receives a 30
seconds removal penalty.
If the ball is within a radius of 0.5 m around the goal keeper inside the goal area,
the goal keeper has to show active attempts to move the ball out of this radius by walking towards the ball or moving the ball.
If no attempt is shown for 20 seconds, the goal keeper is considered to be an
inactive player and receives a 30 seconds removal penalty.

A player that stays outside of the artificial turf for 20 seconds is
  considered as an incapable player and receives a 30 seconds removal penalty.

\bigskip
 
\added{
{\bfseries Damage to the Field}

A robot that damages the field, or poses a threat to spectator safety, will be removed from the field for a 30 second removal penalty.}

\bigskip

{\bfseries Substitutions (physical competition only)}

Up to two players per game can be substituted by other players of the same team.
A substituted robot can come back in play but it counts as an additional substitution.
The referee must be informed prior to the substitution.
A substitute only enters the field after the player being replaced left the
field and after receiving a signal from the referee.
Any of the other players may change places with the goalkeeper,
provided that the referee is informed before the change is made and that the
change is made during a stoppage of the match.
Changing places/roles between a field player and a goalie does not count as
substitution.

\bigskip

{\bfseries Temporal Absence (physical competition only)}

Servicing robots on the playing field is not permitted.
A robot may be taken out of the field for service,
after receiving permission from the referee.
Taking out a robot for service does not count as a substitution.
A serviced robot may not come into play again before 30 seconds elapsed after it
was taken out.
It has to enter the field from the team's own half of the field close to the
penalty mark facing the opposite touch line, as indicated by the referee.
The same rules as for \textit{Removal Penalty} apply.

\bigskip

{\bfseries Manual Untangle of Robots (physical competition only)}

If entangled robots fail to untangle themselves, the referee might ask designated robot handlers of both teams to untangle the robots. Untangling must not make
significant changes to robot positions or heading directions. Untangled robots must be laid on the ground not closer than 50cm to the ball and in a way not gaining an advantage.

\bigskip


{\bfseries Removal Penalty}

\begin{itemize}
\item Time penalties of 30 seconds for players are called by the referee. When a penalty is called in the physical competition, the designated robot handler has to remove the robot as soon as possible and by that interacting as little as possible with the game
\item In the physical competition, the referee and assistant referees are in charge of timing the penalties and notifying the teams to put back their robots to play. In the virtual competition, the robots receive the signal that their penalty time is over automatically from the GameController.
\item A field player or goal keeper suffering a time penalty will be
  removed from the field and is only allowed to re-enter
  the field from the team's own half of the field close to the penalty mark
  as indicated by the referee. In the physical competition, robots need to face the opposite touch line.
  The referee chooses the touch line further away from the ball if there
    is still an empty spot available. The first spot for a penalized robot on
    the touch line is on the same height of the penalty mark. Every consecutive
    spot is 60 cm (KidSize) or 100 cm (AdultSize) away from the previous
    position, either towards the team's own goal line or towards the center
    line. A valid position must be at least 30 cm (KidSize) or 50 cm (AdultSize)
    away from the goal line and center line. A position is considered as being
    taken if a robot from any team is within a radius of 30 cm (KidSize) or 50
    cm (AdultSize) of the penalty position. The referee always positions the
    robot on the penalty spot closest to the penalty mark. If two positions are
    available that are equally close, the referee chooses the position that is
    further away from the ball.
    In the virtual competition, robots get placed automatically by the autonomous referee. When placed, the robot joints are reset to their initial position and their
    velocities is set to 0.

\item In the physical competition, after the robot has been placed at the position indicated by the referee
      and with both feet entirely outside the field of play the robot handler
      announces to the assistant referee that the robot is ready to get back in.
      The 30 seconds penalty start counting from the point of announcement.
      From this point onwards the robot handler may not touch or interfere with
      the robot in any other way (including button presses).
      If any part of the robot touches the field of play (including touch lines)
      or the robot handler touching the robot before the 30 seconds expired,
      the time is reset. In the virtual competition, the penalty time starts counting immediately after the robot was repositioned to the side line by the autonomous referee.
\item The GameController or the assistant referee operating it will:
  \begin{itemize}
  \item Penalize the robot as soon as the referee calls the penalty.
  \item Marks the penalty time counting down as soon as the robot handler
      announced the robot being ready to walk in (physical competition) or it is placed on the penalty position outside the field (virtual competition)
  \item In the physical competition, the assistant referee resets the penalty time whenever the robot handler touches the robot or
      the robot touches the field of play
  \end{itemize}
\item The penalty is automatically removed after 30 seconds of penalty have expired.
\end{itemize}

\bigskip

{\bfseries Timeouts (physical competition only)}

A team may call for a timeout before kick-off after a goal was scored,
the start of a new half, or a drop ball was called and before a penalty shoot-out.
During a timeout robots may be serviced.
Each team may take at most one timeout per period during regular game time and
one additional timeout during all of the extended time and penalty shoot-out.
If a team is not ready to resume the game when the referee wants to start the game,
it has to take a timeout.
If there is no timeout left, the referee will start the game anyway.
A timeout ends automatically after 120 s.
A timeout also ends when the team signals its end to the referee.

\bigskip

{\bfseries Referee Timeouts (physical competition only)}

The head referee may call a timeout before kick-off after a goal was scored,
the start of a new half, or a drop ball was called and before a penalty
shoot-out if they deem it necessary.
A referee timeout should only be called in dire circumstances -
one example might be when the power to the wireless router is down.
However, when and whether to call a referee timeout is left up to the head referee.

Referees may call multiple timeouts during a game if needed. Teams may do anything during these timeouts, but they must be ready to play 2 minutes after the referee begins a timeout. The referee should end the timeout once they believe the circumstance for which the timeout was called has been resolved. In cases where the circumstance for which the timeout was called is not resolved within 10 minutes, the Technical Committee should be consulted regarding when/if play should continue.

The team who would have kicked off if the timeout had not been called shall kickoff when the game resumes.

\bigskip

{\bfseries Timeout and Restart by Technical Committee (virtual competition only)}

Two members of the Technical Committee that are not directly involved with any of the team currently playing the game can decide to pause or restart the simulation in case of severe technical difficulties with the simulator, the network, the computer instances or any other equipment involved in running the simulated games. A timeout can be taken multiple times throughout a game if necessary. The Technical Committee must publish a written report of the amount and reasons for any timeout taken or restart of the game.

\bigskip

{\bfseries Disciplinary sanctions against robots}

Yellow and red cards given to robots only accumulate for the current game and are cleared again after the end of each game. Warnings against robot handlers and/or teams have to be reported to the Technical Committee after each game. They are recorded and accumulated for the whole tournament.

\bigskip

{\bfseries Disciplinary sanctions against teams (virtual competition only)}

A team is cautioned by the technical committee and may be shown a yellow
  card if it commits any of the following offences:


\begin{itemize}
\item unsporting behaviour, in particular by deliberately and repeatedly
    using limitations of the automated referee to their advantage
\item dissent by word or action
\item persistent infringement of the Laws of the Game
\item delaying the restart of play
\end{itemize}


\bigskip

{\bfseries Result publication (virtual competition only)}

In case the simulation can be performed and rendered in real time, a video of the simulated game will be streamed simultaneously to the match being played. In case the simulator does not allow for real-time games and rendering, the video will be streamed after the match was performed and the rendering was completed. Teams will get access to log files of the game and their robot software immediately after the video of the match has ended.

\bigskip

{\bfseries Software changes (virtual competition only)}

Teams can update their software during the tournament.
  The software they intend to use for the next round of games needs to be
  submitted at latest X hours before the video stream of their next game is
  scheduled, the value of X is provided to teams at the beginning of the
  tournament and it can be different for round-robin games and knock-out
  games.


\bigskip

{\bfseries Drop-In Games (physical competition only)}

\headlinebox

{\bfseries Organisation}

Each participating team will contribute one drop-in player for each drop-in game.
The drop-in player may be chosen from all available robots of the team and does
not have to be the same in all drop-in games.
Each drop-in player will compete in games with many different teams composed of
randomly chosen drop-in players.
In each game, the opponent will be a similarly composed team of randomly
selected drop-in players.
The exact number of games played by each drop-in player depends on the number of
teams that participate in the competition.
A minimum of 4 drop-in games will be played by every team.

\bigskip

The drop-in players will be allocated to teams randomly at least 24 hours before
the first game takes place.
The allocation to teams for the individual games is randomly chosen and changes
for every single game.
Some teams might play one more Drop-In game than others.

\bigskip

{\bfseries Rules}

All normal game rules apply to this competition. The only exceptions are:
\begin{enumerate}
\item The games are played with 5 players in a KidSize team
     and 3 players in an AdultSize team.
      If there is an insufficient number of participants,
      games may be played 4 vs. 4 or 3 vs. 3 for KidSize
      or 2 vs. 2 for AdultSize.
\item Games may end in a draw.
\item Each of the players has a jersey number from the set {1, 2, 3, 4, 5},
      resp. {1, 2, 3}.
\item Drop-in teams will wear the blue and red team colours.
\item In AdultSize, one robot handler per competing robot is allowed.
      In KidSize, the teams have to agree on one robot handler per team.
\end{enumerate}

Removal of incapable players has to be enforced strictly.

\bigskip
 
{\bfseries Communication}

Teams are strongly encouraged to implement the mitecom team communication protocol which is available at \\
\url{https://github.com/RoboCup-Humanoid-TC/mitecom} 
or the Protobuf-based communication protocol which can be found at
  \url{https://github.com/RoboCup-Humanoid-TC/RobocupProtocol}

\bigskip
 
{\bfseries Selection of the Referees}

Referees will be drawn from the remaining participating teams, or if needed,
due to a low number of teams, the TC and OC will provide referees.
Referees for a match may be picked among the pool of available referees from any size class.

\bigskip
 
{\bfseries Scoring}

When a goal is scored, all players of the scoring team on the field receive 1 point and the player who scored the goal receives an additional 1 point if it was not an own goal. A robot is considered to be on the field if both feet of the robot are fully inside the field area. The player who scored the goal receives the points regardless of its position on the field. Incapable players, penalized players, players outside the field or players having been removed for any other reason, e.g. service, will receive no point. When a goal is suffered, all players of the team suffering the goal receive -1 points, including incapable players, penalized players or players having been removed for any other reason, e.g. in service. Points from all games are summed up. For players who played one or more games more than the others, only the points of those games with the higher scores are considered.

Drop-in players are initially ranked according to the arithmetic mean.
If there are ties, the tied players are ranked according to the number of games played,
the maximum points awarded in a single game and the number of goals scored (in
this order).
The three most highly ranked players of a sub-league receive a 'Best Player' certificate.

If the three best drop-in players can not be identified with the scheme provided above, an additional game with players drawn group wise (from the groups of equally high ranked players with a total number of points greater than zero) from the highest-ranked players is to be played.

If there are still ties a penalty shoot out among the equally high ranked drop-in players with a total number of points greater than zero takes place.

\bigskip 
 
{\bfseries Example}
 
There are 20 participating players for 4 KidSize Drop-In teams (A, B, C, D). Games shall be A-B, A-C, A-D, B-C, B-D, C-D. For the first game (A-B), Player 1 is randomly drawn for Team B and plays the game with the other team members. For the second game (A-C), player 1 is not drawn. For the third game (A-D), player 1 is drawn for team A and plays the game. For the fourth game (B-C), player 1 is drawn to team C and plays the game. Now player 1 will be removed from the drawing, because the number of 3 games was reached. If there would be only 19 participants, player 1 may be drawn for the final game.

Assuming teams with player 1 to score a single goal in every game (with player 1 on the field), then player 1 will have a score of 3 and an arithmetic average of 1.

\bigskip

{\bfseries Technical Challenges (physical competition only)}

\headlinebox

The technical challenges consist of:

\begin{enumerate}
\item Push Recovery (AdultSize)
\item Collaborative Localization (KidSize)
\item Goal Kick from Moving Ball (KidSize and AdultSize)
\item Parkour (KidSize and AdultSize)
\item High-Kick (KidSize and AdultSize)
\end{enumerate}

For details on the technical challenges, please refer to Section III of this document.

\bigskip

\newpage
{\bfseries Best Humanoid Award (physical competition only)}

\headlinebox
 
The teams of the Kid and Adult size classes that have
participated in the drop-in competition are ranked in separate lists to
determine the overall best humanoid.

The ranking is based on the aggregated number of points earned in the individual competitions.

\bigskip

The points earned in the technical challenge are used directly.

\bigskip

For the Drop-In challenge the winner receives 30 points. The second best team receives 21 points. The third best team receives 15 points.


\bigskip

For the soccer games the winner receives 60 points. The second best team receives 42 points. The third best team receives 30 points.

\bigskip

The teams ranked first in the KidSize and AdultSize lists
are candidates for the best humanoid.
The final ranking between the three candidates is determined by the points
earned in the individual competitions as stated above.
The best KidSize or AdultSize team with the most overall
points wins the best humanoid award.
If there are ties, the average goals scored per game is used to determine the
ranking of the three eligible candidates.
If there are still ties, the president of the RoboCup Federation breaks the tie.

\bigskip

{\bfseries Trophies}

\headlinebox

A trophy is awarded to the winner of the soccer tournament in each of the
individual size classes \removed{and technical challenges}
(physical competition only).
In case there are two divisions, trophies are only awarded to the teams
of division A. Teams of Division B might be awarded certificates.
\removed{%
  In case of less than 3 teams participating in a size class no trophies will be
  given in this class.
}

\bigskip

A trophy is awarded to the teams second and third in the KidSize 4-4 soccer game
and the AdultSize 2-2 soccer game.
In case of less than \removed{5}\added{9} teams participating in a size class the team ranked third
will be awarded a certificate instead of a trophy.
In case of less than \removed{4}\added{6} teams participating in a size class the team ranked
second will also be awarded a certificate instead of a trophy.
\removed{The final number of trophies awarded will be decided by the RoboCup Federation
based on the number of actually participating teams.}

\bigskip

In a physical competition, \added{a trophy is awarded to the team ranked first
on the technical challenges and} certificates are awarded to the teams second
and third in the technical challenges.
\added{In case less than 15 teams participate to a size class, the team ranked
first at technical challenges will be awarded a certificate instead of a trophy.}
\added{A certificate is awarded} to the team ranked second in the Best Humanoid list.
A 'Best Player' certificate \added{is awarded} to the three most highly ranked
Drop-in players.
In case 20 teams or more participate to a class size, the team ranked first on
Drop-in is awarded a trophy instead of a certificate.
A team can only receive a 'Best Player' certificate if their total amount of
points is greater than 0.

\bigskip

In a physical competition, the Best Humanoid Award is awarded to the team ranked first in the Best Humanoid list,
it can either be a trophy or a certificate.

\bigskip

\added{%
  The number of trophies awarded depend on the number of teams participating to
  a class size and is summarized in Table~\ref{tab:trophies}.
}

\begin{table}
  \centering
  \begin{tabular}{llll}
    Number of teams & Regular soccer games & Technical challenges & Drop-in games\\
    \hline
    1 to 5 & 1st & & \\
    6 to 8 & 1st, 2nd & & \\
    9 to 14 & 1st, 2nd, 3rd & & \\
    15 to 19 & 1st, 2nd, 3rd & 1st & \\
    20 & 1st, 2nd, 3rd & 1st & 1st \\
  \end{tabular}
  \caption{\added{Trophies awarded depending on the number of teams participating
  in a class size.}}
  \label{tab:trophies}
\end{table}

\bigskip


{\bfseries Conflict Resolution}

\headlinebox

It is the responsibility of the team leader to inspect the other team's
robots an hour (physical competition) or twelve hours (virtual competition) in advance of a game.
Any concern regarding the rule compliance of any of the
robots, including the amount, size and colour of the team markers, must be
brought to the attention of the referee during a physical competition or the Technical Committee during a virtual competition.
If the referee is unavailable during a physical competition, they have to be brought to the attention
  of the Technical Committee instead.



\bigskip

Every result of a game needs to be certified by at least two members of the Technical Committee not directly involved in any of the teams playing in that game.
Doubts concerning a serious violation of any rule during a specific game must be
brought up to a member of the Technical Committee and investigated before
signing the result.
By signing the result sheet, a team agrees that the result came off in
a fair game.
Concerns must be brought to the attention of the Technical Committee
  within half an hour of the completion of the video stream (virtual competition) or game play (physical competition).
If a team brings up an official concern to the Technical Committee, a meeting of
the Technical Committee must be called as soon as possible.
If the team of a member of the Technical Committee is directly involved in the
game in question, the respective member is excluded from the meeting.
At least three members of the Technical Committee need to be part of the meeting
and the decision process.
If less than three members of the Technical Committee are available,
members of the Organizing committee or, if necessary,
Trustees or members of committees from other leagues have to be called into the
meeting.
Members of these meetings may request to inspect the hardware,
robot model and software of any team involved in the issue.
In a virtual tournament, they will receive access to the rendered video of the
  simulation and any log file produced by the simulator, GameController and
  automated referee.
If serious violations of rules or recurrent unsportive behavior
are detected, the committee may, among others, decide to invalidate the result
of the game in question or take disciplinary actions against a team as defined
in Law 5, depending on the severity of the rule violation.
The decision of the committee meeting need to be announced to the whole league.
If teams receive a warning or yellow card for unsportive behavior and are
  requested to make changes to their code for the next game, they need to
  receive a period of at least four hours to make the requested change.
  If their next game was scheduled earlier than this, the game needs to be
  postponed.


\bigskip
\added{
      {\bfseries Announcement of code and hardware usage}
      
      \headlinebox
      
      Teams are required to clearly state during the qualification process:

      \bigskip}

      \begin{itemize}
      \item \added{in their software description part of the application material, they need to state what part of the code is based on another team's code base. This needs to be declared for each software section individually. If the code of a team builds on another team's code, they need to clearly state their own changes and contributions. Failure to acknowledge the usage of another teams software can lead to disqualifications (if major parts are built on other team's software without announcing this) or can lower the score of future submissions to the Humanoid League}.
      \item \added{Clearly state in their robot description whether their robots or major components are bought or used from another team or a company (this includes rebuilding robots based on open hardware models of other RoboCup teams). Again, modifications and a team's own contributions need to be clearly marked.}
\end{itemize}
\added{In case they decide to use software or hardware by another team after the qualification material has already been approved a team needs to write an e-mail to the Humanoid League mailing list.}
      
      
\bigskip

{\bfseries Acknowledgements}

\headlinebox

These rules evolved from previous versions of the RoboCup Humanoid League rules. We would like to thank Henry Yen for the conversion of the rules into a basic LaTeX version in 2010. The 2008 version of the rules was compiled by Pasan Kulvanit and Oskar von Stryk, the 2007 version of the rules by Emanuele Menegatti and the 2006 version by Sven Behnke, who did a remarkable job improving the rule document and gearing it towards the FIFA Laws of the Game. The improvements of the 2005 version were compiled by Norbert Michael Mayer. Philipp Allgeuer significantly contributed to the conversion of the 2017 rule book to LaTeX.  Other input came earlier from the rules of the RoboCup MiddleSize and Four-Legged Leagues.

The rules were continuously discussed within the technical committee of the
humanoid league and also on the humanoid league forum.
The following members of the technical committee for 2022 were responsible for
crating the first version of the rules for the virtual Humanoid RoboCup league: Jacky Baltes, Reinaldo Bianchi, Reinhard Gerndt, Jasper G\"{u}ldenstein,
Ludovic Hofer, Maike Paetzel-Pr\"{u}smann and Alessandra Rossi.
Special thanks go to Martin Friedmann, Sebastian Mielke and Timon Giese for the
contribution of several figures and to Philipp Allgeuer for his contributions to
the 2019 version of the rules.
\added{We thank the authors of the original design and schematics of the center
  of mass measurement device described in the appendix.}
